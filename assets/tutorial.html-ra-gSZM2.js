import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as e,o as l}from"./app-CeyZRnX1.js";const n="/img/develop/custom-task-1.png",t="/img/develop/custom-task-2.png",h={};function d(r,s){return l(),a("div",null,s[0]||(s[0]=[e(`<div class="hint-container warning"><p class="hint-container-title">注意</p><p>本章节内容主要面向开发者和高级用户，普通用户可以跳过。<br> 本章节内容可能会随着SRA版本更新而变化。<br> 本章节内容可能涉及SRA源码编辑。</p></div><h2 id="从源码运行-sra-交互式命令行界面" tabindex="-1"><a class="header-anchor" href="#从源码运行-sra-交互式命令行界面"><span>从源码运行 SRA 交互式命令行界面</span></a></h2><p>本章节介绍如何从源码运行 SRA-cli。</p><h3 id="先决条件" tabindex="-1"><a class="header-anchor" href="#先决条件"><span>先决条件</span></a></h3><ul><li>Python 3.12 及以上版本</li><li>Git</li></ul><h3 id="分步教程" tabindex="-1"><a class="header-anchor" href="#分步教程"><span>分步教程</span></a></h3><ol><li><p>克隆存储库：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> clone</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://github.com/Shasnow/StarRailAssistant.git</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果克隆较慢，考虑使用浅层克隆</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> clone</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://github.com/Shasnow/StarRailAssistant.git</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --depth=1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>进入项目目录：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> StarRailAssistant</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>创建并激活虚拟环境：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">python</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> venv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> .venv</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> .venv/bin/activate</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # Linux 或 macOS</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">.venv\\Scripts\\activate</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     # Windows</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>安装依赖：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -r</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> requirements.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果安装较慢，考虑使用国内镜像源，例如清华大学的 PyPI 镜像：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -r</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> requirements.txt</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://pypi.tuna.tsinghua.edu.cn/simple</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>运行 SRA：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">python</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> main.py</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这会让你进入 SRA 的交互式命令行界面，你应该看到下面的输出：</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span># ... 这些是一些调试信息</span></span>
<span class="line"><span>SRA-cli 2.4.0 (2.4.0 on win32)</span></span>
<span class="line"><span>输入 &#39;help&#39; 或 &#39;?&#39; 来查看命令列表。</span></span>
<span class="line"><span>sra&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>运行任务，或进行其他操作：<br> 参考进阶操作中 <a href="/getstarted/advance#sracli">SRA-cli</a> 章节了解如何使用 SRA-cli。</p></li><li><p>尝试一下：</p><ul><li>运行 <code>help</code> 命令查看可用命令。</li><li>运行 <code>version</code> 命令查看当前 SRA 版本。</li><li>运行 <code>exit</code> 命令退出 SRA-cli。</li></ul></li><li><p>常见问题：</p><ul><li>SRA 提示 <code>WARNING | 您没有以管理员权限运行 SRA-cli。某些命令可能无法正常工作。</code>： <ul><li>考虑以管理员权限运行终端，然后重新执行步骤 5。</li><li>如果您使用 Pycharm 等 IDE，请确保以管理员权限运行 IDE。</li></ul></li></ul></li></ol><h2 id="从源码运行-sra-图形化用户界面" tabindex="-1"><a class="header-anchor" href="#从源码运行-sra-图形化用户界面"><span>从源码运行 SRA 图形化用户界面</span></a></h2><p>本章节介绍如何从源码运行 SRA GUI。</p><h3 id="先决条件-1" tabindex="-1"><a class="header-anchor" href="#先决条件-1"><span>先决条件</span></a></h3><ul><li>.NET 8.0 SDK 及以上版本</li><li>Git</li></ul><h3 id="分步教程-1" tabindex="-1"><a class="header-anchor" href="#分步教程-1"><span>分步教程</span></a></h3><ol><li><p>克隆存储库：<br> 如果您已经克隆过存储库，可以跳过此步骤。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> clone</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://github.com/Shasnow/StarRailAssistant.git</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果克隆较慢，考虑使用浅层克隆</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> clone</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://github.com/Shasnow/StarRailAssistant.git</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --depth=1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>进入项目目录：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> StarRailAssistant</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>运行项目：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dotnet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --project</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ./SRAFrontend/SRAFrontend.csproj</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这会编译并运行 SRA GUI，你应该看到 SRA 窗口弹出。</p></li><li><p>尝试一下：</p><ul><li>浏览各个功能模块，熟悉 SRA 的使用。</li><li>访问设置页面，调整 SRA 的配置。</li></ul></li><li><p>常见问题：</p><ul><li><code>请求的操作需要提升</code>: <ul><li>考虑以管理员权限运行终端，然后重新执行步骤 3。</li><li>如果您使用 Visual Studio 等 IDE，请确保以管理员权限运行 IDE。</li></ul></li></ul></li></ol><h2 id="在-sra-中添加自定义任务" tabindex="-1"><a class="header-anchor" href="#在-sra-中添加自定义任务"><span>在 SRA 中添加自定义任务</span></a></h2><p>本章节介绍如何在 SRA 中添加一个自定义任务。</p><h3 id="先决条件-2" tabindex="-1"><a class="header-anchor" href="#先决条件-2"><span>先决条件</span></a></h3><ul><li>已安装 SRA 或已获取 SRA 源码</li><li>了解 Python 编程基础</li><li>文本编辑器（如 VSCode、Notepad++）</li></ul><h3 id="分步教程-2" tabindex="-1"><a class="header-anchor" href="#分步教程-2"><span>分步教程</span></a></h3><ol><li><p>打开 SRA 的安装目录或源码目录，找到 <code>tasks</code> 文件夹。<br><img src="`+n+'" alt="SRA 安装目录" loading="lazy"><br> 这里存放了所有的任务脚本。<br><img src="'+t+`" alt="tasks 文件夹" loading="lazy"></p></li><li><p>创建一个新的 Python 文件，例如 <code>MyCustomTask.py</code>。</p></li><li><p>在文件中编写任务代码，例如：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> SRACore.task </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> BaseTask</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> SRACore.util.logger </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> logger</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> MyCustomTask</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">BaseTask</span><span style="--shiki-light:#C18401;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    def</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E5C07B;--shiki-dark-font-style:italic;">self</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        logger.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;这是我的自定义任务！&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>解释：<br> 这是一个简单的任务类，继承自 <code>BaseTask</code>，并实现了 <code>run</code> 方法，在运行时会打印一条日志信息。</p><ul><li><code>from SRACore.task import BaseTask</code>：导入任务基类。</li><li><code>from SRACore.util.logger import logger</code>：导入日志记录器。</li><li><code>class MyCustomTask(BaseTask):</code>：定义一个新的任务类。</li><li><code>def run(self):</code>：实现任务的主要逻辑。</li><li><code>logger.info(&quot;这是我的自定义任务！&quot;)</code>：打印日志信息。</li><li><code>BaseTask</code> 类是所有任务的基类，必须继承它才能被 SRA 识别为任务。</li><li><code>BaseTask</code> 要求实现 <code>run</code> 方法，作为任务的入口点。</li></ul></li><li><p>注册任务：<br> 打开 <code>SRACore/config.toml</code> 在文件末尾追加：</p><div class="language-toml line-numbers-mode" data-highlighter="shiki" data-ext="toml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-toml"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[[</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tasks</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义任务&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;MyCustomTask&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">module</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;tasks.MyCustomTask&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>解释：</p><ul><li><code>[[tasks]]</code>：表示这是一个任务配置块。</li><li><code>name</code>：任务的显示名称。</li><li><code>main</code>：任务类的名称。</li><li><code>module</code>：任务类所在的模块路径。</li></ul></li><li><p>测试你的任务类：<br> 在进行下一步之前，确保你所有的修改都已保存。<br> 运行 SRA：</p><ul><li>如果你使用的是安装的 SRA，请在 SRA 安装目录下找到 <code>SRA-cli.exe</code> 并运行它。</li><li>如果你使用的是源码，请参考前面的章节了解如何运行 SRA。</li></ul><p>如果一切正常，你应该能在 SRA-cli 中看到你的自定义任务已被加载，得到类似如下的输出：</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span>DEBUG | Successfully load task: [&lt;class &#39;tasks.StartGameTask.StartGameTask&#39;&gt;,</span></span>
<span class="line"><span>&lt;class &#39;tasks.TrailblazePowerTask.TrailblazePowerTask&#39;&gt;,</span></span>
<span class="line"><span>&lt;class &#39;tasks.ReceiveRewardsTask.ReceiveRewardsTask&#39;&gt;,</span></span>
<span class="line"><span>&lt;class &#39;tasks.CosmicStrifeTask.CosmicStrifeTask&#39;&gt;,</span></span>
<span class="line"><span>&lt;class &#39;tasks.MissionAccomplishTask.MissionAccomplishTask&#39;&gt;,</span></span>
<span class="line"><span>&lt;class &#39;tasks.MyCustomTask.MyCustomTask&#39;&gt;]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>SRA 会打印出已加载的任务列表，其中应包含 <code>MyCustomTask</code>，你的任务已成功注册，它的索引为 5.</p><p>在 SRA-cli 中，运行以下命令来执行你的自定义任务：</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span>task single 5</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>或者</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span>task single MyCustomTask</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>你应该能在控制台看到日志输出：</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span>sra&gt; task single 5</span></span>
<span class="line"><span>12:28:40[7916] | DEBUG | [Start]</span></span>
<span class="line"><span>12:28:40[7916] | DEBUG | run single task: config=Default, task=5</span></span>
<span class="line"><span>12:28:40[7916] | DEBUG | config: ...</span></span>
<span class="line"><span>12:28:40[7916] | DEBUG | running task: MyCustomTask</span></span>
<span class="line"><span>12:28:40[7916] | INFO  | 这是我的自定义任务！</span></span>
<span class="line"><span>12:28:40[7916] | ERROR | 任务 &#39;MyCustomTask&#39; 失败。停止进一步执行。</span></span>
<span class="line"><span>12:28:40[7916] | DEBUG | [Done]</span></span>
<span class="line"><span>sra&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这表示你的任务已成功运行。<br> 你可能注意到日志中有一条错误信息 <code>任务 &#39;MyCustomTask&#39; 失败。停止进一步执行。</code>，这是因为我们没有在任务执行完成后返回成功状态。</p><p>在 <code>run</code> 方法的末尾添加以下代码以返回成功状态：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> True</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>现在再次运行任务，你应该不会再看到错误信息。</p></li><li><p>恭喜！<br> 你已经成功创建并运行了一个自定义任务！如果想实现更复杂的功能，可以参考 SRA 的其他任务脚本，和 SRA 提供的 API 文档。</p></li></ol>`,19)]))}const c=i(h,[["render",d]]),o=JSON.parse('{"path":"/develop/tutorial.html","title":"教程","lang":"zh-CN","frontmatter":{"title":"教程","icon":"code","order":7,"author":"Shasnow","description":"注意 本章节内容主要面向开发者和高级用户，普通用户可以跳过。 本章节内容可能会随着SRA版本更新而变化。 本章节内容可能涉及SRA源码编辑。 从源码运行 SRA 交互式命令行界面 本章节介绍如何从源码运行 SRA-cli。 先决条件 Python 3.12 及以上版本 Git 分步教程 克隆存储库： 如果克隆较慢，考虑使用浅层克隆 进入项目目录： 创建...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"教程\\",\\"image\\":[\\"https://starrailassistant.top/img/develop/custom-task-1.png\\",\\"https://starrailassistant.top/img/develop/custom-task-2.png\\"],\\"dateModified\\":\\"2026-01-10T04:56:18.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Shasnow\\"}]}"],["meta",{"property":"og:url","content":"https://starrailassistant.top/develop/tutorial.html"}],["meta",{"property":"og:site_name","content":"StarRailAssistant"}],["meta",{"property":"og:title","content":"教程"}],["meta",{"property":"og:description","content":"注意 本章节内容主要面向开发者和高级用户，普通用户可以跳过。 本章节内容可能会随着SRA版本更新而变化。 本章节内容可能涉及SRA源码编辑。 从源码运行 SRA 交互式命令行界面 本章节介绍如何从源码运行 SRA-cli。 先决条件 Python 3.12 及以上版本 Git 分步教程 克隆存储库： 如果克隆较慢，考虑使用浅层克隆 进入项目目录： 创建..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://starrailassistant.top/img/develop/custom-task-1.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-01-10T04:56:18.000Z"}],["meta",{"property":"article:author","content":"Shasnow"}],["meta",{"property":"article:modified_time","content":"2026-01-10T04:56:18.000Z"}]]},"git":{"createdTime":1768020978000,"updatedTime":1768020978000,"contributors":[{"name":"Shasnow","username":"Shasnow","email":"yukikage@qq.com","commits":1,"url":"https://github.com/Shasnow"}]},"readingTime":{"minutes":4.86,"words":1458},"filePathRelative":"develop/tutorial.md","autoDesc":true}');export{c as comp,o as data};
